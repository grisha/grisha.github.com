<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Gregory Trubetskoy</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Notes to self.">
    <meta name="generator" content="Hugo 0.146.0">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Gregory Trubetskoy">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css" >




    


    
      

    

    
    
      <link href="/posts/atom.xml" rel="alternate" type="application/rss+xml" title="Gregory Trubetskoy" />
      <link href="/posts/atom.xml" rel="feed" type="application/rss+xml" title="Gregory Trubetskoy" />
      
    

    
      <link rel="canonical" href="https://grisha.org/posts/">
    

    
    
    <meta property="og:url" content="https://grisha.org/posts/">
  <meta property="og:site_name" content="Gregory Trubetskoy">
  <meta property="og:title" content="Posts">
  <meta property="og:description" content="Notes to self.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Posts">
  <meta itemprop="description" content="Notes to self.">
  <meta itemprop="datePublished" content="2020-05-08T12:22:00+00:00">
  <meta itemprop="dateModified" content="2020-05-08T12:22:00+00:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Posts">
  <meta name="twitter:description" content="Notes to self.">

      
      
    
	
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$', '$'] ],
      displayMath: [ ['$$', '$$']],
      processEscapes: true,
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Gregory Trubetskoy
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/archives/" title="Archives page">
              Archives
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Posts
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      

  <article class="pa3 pa4-ns nested-copy-line-height">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy nested-links mid-gray">
      
    </section>
    <aside class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        April 27, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/04/27/go-web-app-part-3/" class="link black dim">
        Building a Go Web App - Part 3
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>This is part 3. See <a href="/blog/2017/04/27/simplistic-go-web-app/">part 1</a>
and <a href="/blog/2017/04/27/simplistic-go-web-app-part-2/">part 2</a>.</p>
<p>The previous two posts got us to a point where we had a Go app which
was able to serve a tiny bit of HTML. This post will talk about the
client side, which, alas, is mostly JavaScript, not Go.</p>
<h3 id="javascript-in-2017">JavaScript in 2017</h3>
<p>This is what gave me the most grief. I don&rsquo;t really know how to
categorize the mess that present day JavaScript is, nor do I really
know what to attribute it to, and trying to rationalize it would make
for a great, but entirely different blog post. So I&rsquo;m just going to
accept this as the reality we cannot change and move on to how to best
work with it.</p>
    </div>
  <a href="/blog/2017/04/27/go-web-app-part-3/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        April 27, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/04/27/go-web-app-part-4/" class="link black dim">
        Building a Go Web App - Part 4
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>This is part 4. See <a href="/blog/2017/04/27/simplistic-go-web-app/">part 1</a>,
<a href="/blog/2017/04/27/simplistic-go-web-app-part-2/">part 2</a> and
<a href="/blog/2017/04/27/go-web-app-part-3/">part 3</a>.</p>
<p>In this part I will try to briefly go over the missing pieces in our
very simplistic Go Web App.</p>
<h3 id="http-handler-wrappers">HTTP Handler Wrappers</h3>
<p>I tiny rant: I do not like the word &ldquo;middleware&rdquo;. The concept of a
wrapper has been around since the dawn of computing, there is no need
to invent new words for it.</p>
<p>Having that out of the way, let&rsquo;s say we need to require
authentication for a certain URL. This is what our index handler
presently looks like:</p>
    </div>
  <a href="/blog/2017/04/27/go-web-app-part-4/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        March 22, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/03/22/tgres-0-dot-10-dot-0b-time-series-with-go-and-postgresql/" class="link black dim">
        Tgres 0.10.0b - Time Series with Go and PostgreSQL
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>After nearly two years of hacking, I am tagging this version of
<a href="https://github.com/tgres/tgres">Tgres</a>
as beta. It is functional and stable enough for people to try out and
not feel like they are wasting their time. There is still a lot that
could and should be improved, but at this point the most
important thing is to get more people to check it out.</p>
<h3 id="what-is-tgres">What is Tgres?</h3>
<p>Tgres is a <a href="https://golang.org">Go</a> program which can receive time
series data via <a href="https://graphiteapp.org/">Graphite</a>, <a href="https://github.com/etsy/statsd/wiki">Statsd</a>
protocols or an http <a href="https://godoc.org/github.com/tgres/tgres/http#PixelHandler">pixel</a>, store it
in <a href="https://www.postgresql.org/">PostgreSQL</a>, and provide Graphite-like access to the data
in a way that is compatible with tools such as <a href="https://grafana.com/">Grafana</a>. You could think of it as a
drop-in Graphite/Statsd replacement, though I&rsquo;d rather avoid direct
comparison, because the key feature of Tgres is that data is stored in
PostgreSQL.</p>
    </div>
  <a href="/blog/2017/03/22/tgres-0-dot-10-dot-0b-time-series-with-go-and-postgresql/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        February 28, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/02/28/tgres-load-testing-follow-up/" class="link black dim">
        Tgres Load Testing Follow Up
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>To follow up on the <a href="/blog/2017/02/23/can-tgres-outperform-graphite/">previous post</a>,
after a bunch
of tweaking, here is Tgres (<a href="https://github.com/tgres/tgres/commit/90924e4afa4ac8bef61caf46c3439794983660ec">commit</a>) receiving over 150,000 data points per
second across 500,000 time series without any signs of the queue size
or any other resource blowing up.</p>
<p>This is both Tgres and Postgres running on the same i2.2xlarge EC2 instance (8 cores, 64GB, SSD).</p>
<p><img src="/images/tgres_aws1_150k.png" alt=""></p>
<p>At this point I think there&rsquo;s been enough load testing and optimization, and I am
going to get back to crossing the t&rsquo;s and dotting the i&rsquo;s so that we can release
the first version of Tgres.</p>
    </div>
  <a href="/blog/2017/02/28/tgres-load-testing-follow-up/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        February 23, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/02/23/can-tgres-outperform-graphite/" class="link black dim">
        PostgreSQL vs Whisper, which is Faster?
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Note: there is an <a href="/blog/2017/02/28/tgres-load-testing-follow-up/">update</a> to this post.</p>
<h2 id="tldr">TL;DR</h2>
<p>On a 8 CPU / 16 GB EC2 instance,
<a href="https://github.com/tgres/tgres">Tgres</a> can process 150,000 data
points per second across 300,000 series (Postgres running on the same
machine). With some tweaks we were able to get the number of series to
half a million, flushing ~60K data points per second.</p>
<h2 id="now-the-long-version">Now the long version&hellip;</h2>
<p>If you were to ask me whether Tgres could outperform Graphite, just a
couple of months ago my answer would have been &ldquo;No&rdquo;. Tgres uses
Postgres to store time series data, while Graphite stores data by
writing to files directly, the overhead of the relational database
just seemed too great.</p>
    </div>
  <a href="/blog/2017/02/23/can-tgres-outperform-graphite/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        January 21, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/01/21/storing-time-seris-in-postgresql-optimize-for-write/" class="link black dim">
        Storing Time Series in PostgreSQL - Optimize for Write
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Continuing on the
<a href="/blog/2016/12/16/storing-time-series-in-postgresql-part-ii/">previous</a>
write up on how time series data can be stored in Postgres
efficiently, here is another approach, this time providing for extreme
write performance.</p>
<p>The &ldquo;horizontal&rdquo; data structure in the last article requires an SQL
statement for every data point update. If you cache data points long
enough, you might be able to collect a bunch for a series and write
them out at once for a slight performance advantage. But there is no
way to update multiple series with a single statement, it&rsquo;s always
at least one update per series. With a large number of series, this
can become a performance bottleneck. Can we do better?</p>
    </div>
  <a href="/blog/2017/01/21/storing-time-seris-in-postgresql-optimize-for-write/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 28, 2016
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2016/12/28/simple-tgres-part-ii-a-high-rate-counter/" class="link black dim">
        Simple Tgres Part II - A High Rate Counter
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Continuing on the <a href="/blog/2016/12/21/simple-time-series-app-with-tgres/">the previous</a>
post on simple use of <a href="https://github.com/tgres/tgres">Tgres</a> components, let&rsquo;s
try to count something that goes by really fast.</p>
<p>This time let&rsquo;s start out with creating a memory-based SerDe. This
means that all our data is in memory and there is no database backing
our series.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;net/http&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;time&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/tgres/tgres/dsl&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">h</span> <span style="color:#e6db74">&#34;github.com/tgres/tgres/http&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/tgres/tgres/receiver&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/tgres/tgres/rrd&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/tgres/tgres/serde&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">step</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">time</span>.<span style="color:#a6e22e">Second</span> <span style="color:#75715e">// 1 second resolution</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">span</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">600</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">step</span>      <span style="color:#75715e">// spanning 10 minutes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// In-memory SerDe</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ms</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">serde</span>.<span style="color:#a6e22e">NewMemSerDe</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Create a receiver of our data points backed by the above</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// memory SerDe</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">rcvr</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">receiver</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">ms</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">receiver</span>.<span style="color:#a6e22e">SimpleDSFinder</span>{<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">rrd</span>.<span style="color:#a6e22e">DSSpec</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">Step</span>: <span style="color:#a6e22e">step</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">RRAs</span>: []<span style="color:#a6e22e">rrd</span>.<span style="color:#a6e22e">RRASpec</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">rrd</span>.<span style="color:#a6e22e">RRASpec</span>{<span style="color:#a6e22e">Function</span>: <span style="color:#a6e22e">rrd</span>.<span style="color:#a6e22e">WMEAN</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Step</span>: <span style="color:#a6e22e">step</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">Span</span>: <span style="color:#a6e22e">span</span>,
</span></span><span style="display:flex;"><span>            },
</span></span><span style="display:flex;"><span>        }}})
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">rcvr</span>.<span style="color:#a6e22e">Start</span>()
</span></span></code></pre></div><p>Now let&rsquo;s create a goroutine which creates data points as fast as it
can, the difference from the previous blog post is that we are using
QueueGauge(), which is a <em>paced metric</em>, meaning that it flushes to the
time series only periodically (once per second by default) so as to
not overwhelm the I/O and or network (even though in this case it doesn&rsquo;t
really matter since we&rsquo;re using a memory-based SerDe anyway).</p>
    </div>
  <a href="/blog/2016/12/28/simple-tgres-part-ii-a-high-rate-counter/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 23, 2016
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2016/12/23/time-series-what-is-it/" class="link black dim">
        Why is there no Formal Definition of Time Series?
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>If you&rsquo;re reading this, chances are you may have searched for
definition of &ldquo;Time Series&rdquo;. And, like me, you were probably
disappointed by what you&rsquo;ve found.</p>
<p>The most popular &ldquo;definition&rdquo; I come across amongst our fellow
programmer folk is that it&rsquo;s &ldquo;data points with timestamps&rdquo;. Or something
like that. And you can make charts from it. And that&rsquo;s about it, alas.</p>
<p>The word <em>time</em> suggests that is has something to do with time. At
first it seems reasonable, I bite. The word <em>series</em> is a little more
peculiar. A mathematician would argue that a series is a <a href="https://en.wikipedia.org/wiki/Series_(mathematics)"><em>sum</em> of a sequence</a>.
Most people though think &ldquo;series&rdquo; and &ldquo;sequence&rdquo; are the
same thing, and that&rsquo;s fine. But it&rsquo;s a clue that <em>time series</em> is
not a scientific term, because it would have been called
<em>time sequence</em> most likely.</p>
    </div>
  <a href="/blog/2016/12/23/time-series-what-is-it/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 21, 2016
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2016/12/21/simple-time-series-app-with-tgres/" class="link black dim">
        Simple Time Series App with Tgres
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Did you know you can use <a href="https://github.com/tgres/tgres">Tgres</a> components
in your code without PostgreSQL, and in
just a dozen lines of code instrument your program with a time
series. This example shows a complete server emulating Graphite API
which you can use with <a href="http://grafana.org/">Grafana</a> (or any other tool).</p>
<p>In this example we will be using three Tgres packages like so (in addition to
a few standard ones, I&rsquo;m skipping them here for brevity - complete source code <a href="https://gist.github.com/grisha/9561e7837cff1340b218054f36430187">gist</a>):</p>
    </div>
  <a href="/blog/2016/12/21/simple-time-series-app-with-tgres/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 16, 2016
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2016/12/16/storing-time-series-in-postgresql-part-ii/" class="link black dim">
        Storing Time Series in PostgreSQL (Continued)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Edit: there is now a <a href="/blog/2017/01/21/storing-time-seris-in-postgresql-optimize-for-write">part iii</a> in this series of articles.</p>
<p>I have <a href="/blog/2015/09/23/storing-time-series-in-postgresql-efficiently/">previously written</a> how
time series can be stored in PostgreSQL efficiently using <a href="https://www.postgresql.org/docs/current/static/arrays.html">arrays</a>.</p>
<p>As a continuation of that article, I shall attempt to describe in detail the inner workings of an
<a href="https://en.wikipedia.org/wiki/View_(SQL)">SQL view</a> that <a href="https://github.com/tgres/tgres">Tgres</a> uses to
make an array of numbers appear as a regular table
(<a href="https://github.com/tgres/tgres/blob/bc718e3999650b7aab934517179ea47632530d28/serde/postgres.go#L235-L242">link to code</a>).</p>
<p>In short, I will explain how incomprehensible data like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> ts;
</span></span><span style="display:flex;"><span> rra_id <span style="color:#f92672">|</span> n <span style="color:#f92672">|</span>           dp
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------+---+------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">0</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#ae81ff">64</span>,<span style="color:#ae81ff">67</span>,<span style="color:#ae81ff">70</span>,<span style="color:#ae81ff">71</span>,<span style="color:#ae81ff">72</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">67</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#ae81ff">65</span>,<span style="color:#ae81ff">60</span>,<span style="color:#ae81ff">58</span>,<span style="color:#ae81ff">59</span>,<span style="color:#ae81ff">62</span>,<span style="color:#ae81ff">68</span>,<span style="color:#ae81ff">70</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#ae81ff">71</span>,<span style="color:#ae81ff">72</span>,<span style="color:#ae81ff">77</span>,<span style="color:#ae81ff">70</span>,<span style="color:#ae81ff">71</span>,<span style="color:#ae81ff">73</span>,<span style="color:#ae81ff">75</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">1</span> <span style="color:#f92672">|</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#ae81ff">79</span>,<span style="color:#ae81ff">82</span>,<span style="color:#ae81ff">90</span>,<span style="color:#ae81ff">69</span>,<span style="color:#ae81ff">75</span>,<span style="color:#ae81ff">80</span>,<span style="color:#ae81ff">81</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div><p>&hellip; can be transformed in an SQL view to appear as so:</p>
    </div>
  <a href="/blog/2016/12/16/storing-time-series-in-postgresql-part-ii/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
    </aside>
    
    
    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/posts/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/3/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/6/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://grisha.org/" >
    &copy;  Gregory Trubetskoy 2026 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
