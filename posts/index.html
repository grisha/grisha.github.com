<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Gregory Trubetskoy</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Notes to self.">
    <meta name="generator" content="Hugo 0.146.0">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Gregory Trubetskoy">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.d05fb5f317fcf33b3a52936399bdf6f47dc776516e1692e412ec7d76f4a5faa2.css" >




    


    
      

    

    
    
      <link href="/posts/atom.xml" rel="alternate" type="application/rss+xml" title="Gregory Trubetskoy" />
      <link href="/posts/atom.xml" rel="feed" type="application/rss+xml" title="Gregory Trubetskoy" />
      
    

    
      <link rel="canonical" href="https://grisha.org/posts/">
    

    
    
    <meta property="og:url" content="https://grisha.org/posts/">
  <meta property="og:site_name" content="Gregory Trubetskoy">
  <meta property="og:title" content="Posts">
  <meta property="og:description" content="Notes to self.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Posts">
  <meta itemprop="description" content="Notes to self.">
  <meta itemprop="datePublished" content="2020-05-08T12:22:00+00:00">
  <meta itemprop="dateModified" content="2020-05-08T12:22:00+00:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Posts">
  <meta name="twitter:description" content="Notes to self.">

      
      
    
	
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$', '$'] ],
      displayMath: [ ['$$', '$$']],
      processEscapes: true,
    },
    messageStyle: "none",
    "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Gregory Trubetskoy
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white white-90 no-underline" href="/archives/" title="Archives page">
              Archives
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          Posts
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      

  <article class="pa3 pa4-ns nested-copy-line-height">
    <section class="cf ph3 ph5-l pv3 pv4-l f4 tc-l center measure-wide lh-copy nested-links mid-gray">
      
    </section>
    <aside class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        January 23, 2018
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2018/01/23/explaining-proof-of-work/" class="link black dim">
        Blockchain Proof-of-Work is a Decentralized Clock
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>This is an explanation of the key function on Proof-of-Work in the
Bitcoin blockchain.  It focuses on the one feature of Proof-of-Work
that is essential and shows that other features often talked about
such as security are secondary side-effects, useful, but not
essential.</p>
<p>This explanation rests on illustrating a few interesting properties of
how Proof-of-Work is used in the blockchain that are not immediately
obvious and sometimes are rather counter-intuitive, for example how
participants collectively solve a problem without <em>ever
communicating</em>.</p>
    </div>
  <a href="/blog/2018/01/23/explaining-proof-of-work/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        December 15, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/12/15/blockchain-and-postgres/" class="link black dim">
        The Bitcoin Blockchain PostgresSQL Schema
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>In a <a href="/blog/2017/10/10/postgre-as-a-full-node/">previous post</a> I wrote
some initial thoughts on storing the blockchain in Postgres. It&rsquo;s been
a couple of months and I&rsquo;ve made some progress on the
<a href="https://github.com/blkchain/blkchain">import project</a>. This post documents
the latest incarnation of the SQL schema used to store the
blockchain as well as thoughts on why it was decided to be this way.</p>
<h2 id="blockchain-data-structure-overview">Blockchain Data Structure Overview</h2>
<p>The <a href="https://bitcoin.org/en/developer-reference#block-chain">Bitcoin blockchain</a>
consists of <em><a href="https://bitcoin.org/en/developer-reference#serialized-blocks">blocks</a></em>.
A block is a set of <em><a href="https://bitcoin.org/en/developer-reference#raw-transaction-format">transactions</a></em>.
A block also contains some <a href="https://bitcoin.org/en/developer-reference#block-headers">block-specific information</a>,
such as the nonce for the <a href="https://en.bitcoin.it/wiki/Proof_of_work">Proof-Of-Work</a> validating the block.</p>
    </div>
  <a href="/blog/2017/12/15/blockchain-and-postgres/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        October 20, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/10/20/blockchain-in-postgresql-part-2/" class="link black dim">
        Blockchain in PostgreSQL Part 2
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Update: there is now a <a href="/blog/2017/12/15/blockchain-and-postgres/">better write up</a>
of the PostgreSQL schema. This post was rather half-baked as much was
still not understood when I wrote it.</p>
<p>In a <a href="/blog/2017/10/10/postgre-as-a-full-node/">previous post</a> I
described a simplistic schema to store the Bitcoin blockchain in
PostgreSQL. In this post I&rsquo;m investigating pushing the envelope
with a bit of C programming.</p>
<h3 id="the-missing-functionality">The Missing Functionality</h3>
<p>Postgres cannot do certain things required to fully handle
transactions. The missing functionality is (at least):</p>
    </div>
  <a href="/blog/2017/10/20/blockchain-in-postgresql-part-2/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        October 10, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/10/10/postgre-as-a-full-node/" class="link black dim">
        Bitcoin Transaction Hash in Pure PostgreSQL
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Update: hacked together
<a href="https://github.com/blkchain/pg_blkchain">this</a>, more details to
follow later&hellip;</p>
<p>In theory, Postgres should be able to verify transactions and blocks,
as well as do a lot of other things that are currently only done by
full nodes. For this to be performant, it will most likely require an
extension written in C, but I&rsquo;m curious how far we can get with bare
bones Postgres.</p>
<p>More importantly, would that actually be useful? A node is really
just a database, a very efficient one for a very specific purpose, but
would leveraging the full power of Postgres be somehow more beneficial
than just running Bitcoin-Qt or btcd, for example?</p>
    </div>
  <a href="/blog/2017/10/10/postgre-as-a-full-node/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        September 28, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/09/28/electricity-cost-of-1-bitcoin/" class="link black dim">
        Electricity cost of 1 Bitcoin (Sep 2017)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>How much does it cost in electricity to mine a Bitcoin?</p>
<p>As of Sep 28, 2017, according to blockchain.info the hashrate is:
9,214,860,125 GH/s.</p>
<p>These days it seems that the best miner available for sale is the
AntMiner S9. It is actually over a year old, and there are faster and
more energy efficient ASICs now, e.g. BitFury, but it is very hard to
get any information on those, so we will just use the S9 information.</p>
    </div>
  <a href="/blog/2017/09/28/electricity-cost-of-1-bitcoin/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        September 25, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/09/25/bitcoin-value-2/" class="link black dim">
        Bitcoin: USD Value
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>In <a href="/blog/2017/09/22/bitcoin-value/">part 1</a> I explained
how money has always been a global ledger and Bitcoin is just a
different implementation of one. The million dollar question remains,
what should Bitcoin be worth in a currency we&rsquo;re more familiar with,
such as USD?</p>
<h3 id="asset-pricing">Asset Pricing</h3>
<p>To illustrate the dilemma we&rsquo;re faced with, lets look at three types
of assets and how we price them.</p>
<p><em>Stocks:</em> price is determined by the present and future profits, which
is relatively straight forward.</p>
    </div>
  <a href="/blog/2017/09/25/bitcoin-value-2/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        September 22, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/09/22/bitcoin-value/" class="link black dim">
        Bitcoin: Better Ink than Gold?
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>The fundamental question about Bitcoin is not whether it is sound from
the cryptography standpoint. The question is: what is it?</p>
<h3 id="money-is-debt-ink">Money is Debt Ink</h3>
<p>To define Bitcoin we need to look back at the history of <em>money</em>.  The
earliest money was in the form of things that were scarce and
impossible to falsify, something like specific kinds of sea shells.
Everyone knew that stuff could be traded for these tokens.</p>
    </div>
  <a href="/blog/2017/09/22/bitcoin-value/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        July 4, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/07/04/tgres-status-july-2017/" class="link black dim">
        Tgres Status - July 4th 2017
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>It&rsquo;s been a while since I&rsquo;ve written on
<a href="https://github.com/tgres/tgres">Tgres</a>,
here&rsquo;s a little update, Independence Day edition.</p>
<h3 id="current-status">Current Status</h3>
<p>The current status is that Tgres is looking more and more like a
finished product. It still needs time and especially user testing (the
ball is in your court, dear reader), because only time reveals the
weirdest of bugs and validates stability. I would not ditch your
current stack just yet, but at this point you&rsquo;d be remiss not
having given Tgres a spin.</p>
    </div>
  <a href="/blog/2017/07/04/tgres-status-july-2017/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        April 27, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/04/27/simplistic-go-web-app/" class="link black dim">
        Building a Go Web App in 2017
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>Update: <a href="/blog/2017/04/27/simplistic-go-web-app-part-2/">part 2</a> is
here, enjoy. And <a href="/blog/2017/04/27/go-web-app-part-3/">part 3</a>. And
<a href="/blog/2017/04/27/go-web-app-part-4/">part 4</a>.</p>
<p>A few weeks ago I started building yet another web-based app, in
<a href="https://golang.org/">Go</a>. Being mostly a back-end developer, I don&rsquo;t
have to write web apps very often, and every time I do, it seems like a great challenge.
I often wish someone would write a guide to web development for people
who do not have all day to get into the intricacies of great design
and just need to build a functional site that works without too much
fuss.</p>
    </div>
  <a href="/blog/2017/04/27/simplistic-go-web-app/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
        <div class="w-100 w-30-l mb4 relative bg-white">
            <div class="mb3 pa4 mid-gray overflow-hidden">
    
      <div class="f6">
        April 27, 2017
      </div>
    
    <h1 class="f3 near-black">
      <a href="/blog/2017/04/27/simplistic-go-web-app-part-2/" class="link black dim">
        Building a Go Web App - Part 2
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>This is a continuation of <a href="/blog/2017/04/27/simplistic-go-web-app/">part 1</a>.
(There is also <a href="/blog/2017/04/27/go-web-app-part-3/">part 3</a>
and <a href="/blog/2017/04/27/go-web-app-part-4/">part 4</a>).</p>
<p>So our app is going to have two major parts to it: client and
server. (What year is this?). The server side is going to be in Go,
and the client side in JS. Let&rsquo;s talk about the server side first.</p>
<h2 id="the-go-server-side">The Go (Server) Side</h2>
<p>The server side of our application is going to be responsible for
initially serving up all the necessary JavaScript and supporting files
if any, aka static assets and data in the form of JSON. That&rsquo;s it,
just two functions: (1) static assets and (2) JSON.</p>
    </div>
  <a href="/blog/2017/04/27/simplistic-go-web-app-part-2/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>

        </div>
      
    </aside>
    
    
    <ul class="pagination pagination-default">
      <li class="page-item disabled">
        <a aria-disabled="true" aria-label="First" class="page-link" role="button" tabindex="-1"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item disabled">
        <a aria-disabled="true" aria-label="Previous" class="page-link" role="button" tabindex="-1"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item active">
        <a aria-current="page" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/posts/page/2/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/posts/page/6/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="https://grisha.org/" >
    &copy;  Gregory Trubetskoy 2026 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
